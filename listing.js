// Get the size of a hashObject.size = function(obj) {  var size = 0, key;  for (key in obj) {    if (obj.hasOwnProperty(key)) size++;  }  return size;};// Nice centered goodnessentry_width = 350;window_width = (self.innerHeight) ? self.innerWidth : (document.documentElement && document.documentElement.clientHeight) ? document.documentElement.clientWidth : (document.body) ? document.body.clientWidth : false;max_entries = Math.floor(window_width / entry_width);  // Get the API data and make the contentreq = '';online = offline = {};c_on = c_off = '';ct_on = c = 0;for (var i in channels) {  c++;  req = req+i+';';  if (((c % 10) == 0) || (c == (Object.size(channels)))) {    req = 'http://api.ustream.tv/json/channel/'+req.slice(0, -1)+'/getInfo?key='+key+'&callback=?';    $.getJSON(req, function(j) {      if (j) {        for (var k in j) {          var single = (j[0] == null);          var u = (single) ? j : j[k]['result'];          u['synopsis'] = channels[u['urlTitleName']];          if (u['status'] == 'offline') {            c_off = c_off+'<a href="'+u['url']+'" title="'+u['synopsis']+'">'+u['user']['userName']+'</a> : ';          }          else {            ct_on++;            c_on = c_on+' \<div class="entry"> \  <h3> \    <a href="http://www.ustream.tv/channel/'+u['urlTitleName']+'">'+u['user']['userName']+'</a> \  </h3> \  '+u['embedTag']+' \  <div class="synopsis">'+u['synopsis']+'</div> \</div> \            ';          }          if (single) break;        }        $("#wrapper").width( ((max_entries < ct_on) ? max_entries : ct_on) * entry_width);        $("#wrapper").css('margin', '0 auto');        if (c_on) $("#online").html('<h2>Running Now...</h2>'+c_on);        if (c_off) $("#offline").html('<h2>Lazy Bums...</h2>'+c_off.slice(0, -3));      }    });    req = '';  }}